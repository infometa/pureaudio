# Demo ç›®å½•éŸ³é¢‘å¤„ç†ä»£ç ä¸“å®¶çº§å®¡è®¡æŠ¥å‘Š v4

## æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘Šå¯¹ä¿®å¤åçš„ä»£ç è¿›è¡Œç¬¬ 4 æ¬¡å®¡è®¡ï¼Œç¡®è®¤æ€§èƒ½ä¼˜åŒ–ä¿®å¤æƒ…å†µï¼Œæ£€æŸ¥æ˜¯å¦å¼•å…¥æ–°é—®é¢˜ï¼Œå¹¶ç»§ç»­æ·±å…¥åˆ†ææ½œåœ¨é—®é¢˜ã€‚

---

## 1. å·²ä¿®å¤çš„æ€§èƒ½é—®é¢˜ âœ…

### 1.1 PERF-FIX-001: VAD while å¾ªç¯å·²ä¿®å¤ âœ…

**ä½ç½®**: `capture.rs:1241-1253`

**ä¿®å¤å‰**:
```rust
while vad_buf_raw.len() >= vad_source_frame {
    let mut frame_src = vec![0.0f32; vad_source_frame];  // æ¯æ¬¡åˆ†é…
    // ... å¤šæ¬¡ ONNX æ¨ç†
}
```

**ä¿®å¤å**:
```1241:1253:demo/src/capture.rs
                    // æ¯å¸§æœ€å¤šå¤„ç†ä¸€å¸§ VADï¼Œå‰©ä½™ç•™åˆ°ä¸‹ä¸€è½®ï¼Œå¤ç”¨ç¼“å†²é¿å…åˆ†é…
                    if let Some(ref mut v) = vad {
                        for i in 0..vad_source_frame {
                            if let Some(s) = vad_buf_raw.pop_front() {
                                vad_frame_buf[i] = s;
                            } else {
                                break;
                            }
                        }
                        if let Ok(_) = v.process(&vad_frame_buf[..vad_source_frame]) {
                            vad_voice = v.is_speaking();
                        }
                    }
```

**ä¿®å¤ç¡®è®¤**: âœ…
- ç§»é™¤äº† `while` å¾ªç¯ï¼Œæ¯å¸§æœ€å¤šå¤„ç†ä¸€æ¬¡
- ä½¿ç”¨é¢„åˆ†é…çš„ `vad_frame_buf`ï¼Œé¿å…æ¯æ¬¡åˆ†é…
- é¢„æœŸå‡å°‘ VAD è€—æ—¶ 50-70%

---

### 1.2 PERF-FIX-002: é¢‘è°±æ¨é€èŠ‚æµå·²å®ç° âœ…

**ä½ç½®**: `capture.rs:1883-1891`

**ä¿®å¤å**:
```1883:1891:demo/src/capture.rs
            // é¢‘è°±æ¨é€èŠ‚æµï¼šé»˜è®¤æ¯ 3 å¸§ä¸€æ¬¡
            spec_push_counter = spec_push_counter.wrapping_add(1);
            const SPEC_PUSH_INTERVAL: usize = 3;
            if spec_push_counter % SPEC_PUSH_INTERVAL == 0 {
                if let Some((ref mut s_noisy, ref mut s_enh)) = s_spec.as_mut() {
                    push_spec(df.get_spec_noisy(), s_noisy);
                    push_spec(df.get_spec_enh(), s_enh);
                }
            }
```

**ä¿®å¤ç¡®è®¤**: âœ…
- å®ç°äº†æ¯ 3 å¸§æ¨é€ä¸€æ¬¡çš„èŠ‚æµæœºåˆ¶
- é¢„æœŸå‡å°‘é¢‘è°±æ¨é€è€—æ—¶ 60-70%

---

### 1.3 PERF-FIX-003: VAD ç¼“å†²åŒºé‡ç”¨å·²å®ç° âœ…

**ä½ç½®**: `capture.rs:866`

**ä¿®å¤å**:
```866:866:demo/src/capture.rs
        let mut vad_frame_buf: Vec<f32> = vec![0.0f32; vad_source_frame.max(1)];
```

**ä¿®å¤ç¡®è®¤**: âœ…
- é¢„åˆ†é…äº† `vad_frame_buf`ï¼Œé¿å…æ¯æ¬¡å¾ªç¯åˆ†é…
- åœ¨å¾ªç¯ä¸­é‡ç”¨è¯¥ç¼“å†²åŒº

---

## 2. æ–°å‘ç°çš„ä¸¥é‡é—®é¢˜ ğŸ”´

### 2.1 AUDIO-BUG-V4-001: VAD æ•°æ®ä¸è¶³æ—¶ä»ä¼šå¤„ç†ï¼ˆä¸¥é‡ï¼‰

**ä½ç½®**: `capture.rs:1242-1253`

**é—®é¢˜åˆ†æ**:
```1242:1253:demo/src/capture.rs
                    if let Some(ref mut v) = vad {
                        for i in 0..vad_source_frame {
                            if let Some(s) = vad_buf_raw.pop_front() {
                                vad_frame_buf[i] = s;
                            } else {
                                break;  // æ•°æ®ä¸è¶³æ—¶è·³å‡º
                            }
                        }
                        if let Ok(_) = v.process(&vad_frame_buf[..vad_source_frame]) {
                            vad_voice = v.is_speaking();
                        }
                    }
```

**ä¸¥é‡é—®é¢˜**:
1. **æ•°æ®ä¸è¶³æ—¶ä»å¤„ç†**: å¦‚æœ `break` æ—¶ `i < vad_source_frame`ï¼Œ`vad_frame_buf` åªæœ‰éƒ¨åˆ†æ•°æ®è¢«å¡«å……ï¼ˆå¦‚åªå¡«å……äº† 200 ä¸ªæ ·æœ¬ï¼‰ï¼Œå‰©ä½™éƒ¨åˆ†ä»ç„¶æ˜¯ 0.0
2. **VAD è¾“å…¥ä¸æ­£ç¡®**: Silero VAD æœŸæœ›å®Œæ•´çš„ 30ms å¸§ï¼ˆ480 æ ·æœ¬ @16kHzï¼‰ï¼Œä½†å¯èƒ½åªæ”¶åˆ°éƒ¨åˆ†æ•°æ®ï¼ˆå¦‚ 200 æ ·æœ¬ï¼‰
3. **å¯¼è‡´ VAD è¯¯åˆ¤**: ä¸å®Œæ•´çš„è¾“å…¥ï¼ˆåé¢æ˜¯ 0.0ï¼‰ä¼šè¢« VAD è¯¯åˆ¤ä¸ºé™éŸ³æˆ–å™ªå£°ï¼Œå¯¼è‡´è¯­éŸ³æ£€æµ‹å¤±è´¥
4. **å½±å“ç¯å¢ƒè‡ªé€‚åº”**: VAD è¯¯åˆ¤ä¼šå¯¼è‡´ç¯å¢ƒè‡ªé€‚åº”å‚æ•°è°ƒæ•´é”™è¯¯

**å½±å“**:
- VAD å‡†ç¡®æ€§ä¸¥é‡ä¸‹é™
- å¯èƒ½å¯¼è‡´è¯­éŸ³è¢«è¯¯åˆ¤ä¸ºå™ªå£°
- ç¯å¢ƒè‡ªé€‚åº”å¯èƒ½å¤±æ•ˆ
- ç”¨æˆ·ä½“éªŒä¸¥é‡ä¸‹é™

**å»ºè®®ä¿®å¤**:
```rust
// æ£€æŸ¥æ˜¯å¦å¡«å……äº†å®Œæ•´å¸§
let mut filled_count = 0;
for i in 0..vad_source_frame {
    if let Some(s) = vad_buf_raw.pop_front() {
        vad_frame_buf[i] = s;
        filled_count += 1;
    } else {
        break;
    }
}
// åªæœ‰å®Œæ•´å¸§æ‰å¤„ç†ï¼Œä¸å®Œæ•´å¸§è·³è¿‡
if filled_count == vad_source_frame {
    if let Ok(_) = v.process(&vad_frame_buf[..vad_source_frame]) {
        vad_voice = v.is_speaking();
    }
} else {
    // æ•°æ®ä¸è¶³ï¼Œä¸å¤„ç†ï¼Œç­‰å¾…ä¸‹ä¸€å¸§
    // å¯é€‰ï¼šå°†å·²å–å‡ºçš„æ•°æ®æ”¾å›ç¼“å†²åŒº
    for i in (0..filled_count).rev() {
        vad_buf_raw.push_front(vad_frame_buf[i]);
    }
}
```

---

### 2.2 AUDIO-BUG-V4-002: frame_start è®¡æ—¶ä½ç½®ä¸å‡†ç¡®

**ä½ç½®**: `capture.rs:1101`

**é—®é¢˜åˆ†æ**:
```1101:1101:demo/src/capture.rs
            let frame_start = Instant::now();
```

**é—®é¢˜**:
- `frame_start` åœ¨è¾“å…¥æ•°æ®å¡«å……ï¼ˆ`1034-1099` è¡Œï¼‰**ä¹‹å**å¼€å§‹è®¡æ—¶
- è¾“å…¥æ•°æ®å¡«å……çš„æ—¶é—´æ²¡æœ‰è¢«è®¡å…¥å¤„ç†è€—æ—¶
- å¦‚æœè¾“å…¥å¡«å……è€—æ—¶è¾ƒé•¿ï¼ˆå¦‚é‡é‡‡æ ·ã€ç­‰å¾…æ•°æ®ï¼‰ï¼Œå®é™…æ€»è€—æ—¶å¯èƒ½æ¯”ç›‘æ§å€¼æ›´é•¿
- æ€§èƒ½ç›‘æ§å¯èƒ½ä¸å‡†ç¡®ï¼Œæ— æ³•åæ˜ çœŸå®æ€§èƒ½ç“¶é¢ˆ

**å½±å“**:
- æ€§èƒ½ç›‘æ§ä¸å‡†ç¡®
- å¯èƒ½éšè—çœŸå®çš„æ€§èƒ½é—®é¢˜
- æ— æ³•æ­£ç¡®è¯Šæ–­æ€§èƒ½ç“¶é¢ˆ

**å»ºè®®ä¿®å¤**:
```rust
// æ–¹æ¡ˆ 1: åœ¨è¾“å…¥å¡«å……ä¹‹å‰å¼€å§‹è®¡æ—¶
let frame_start = Instant::now();
// ... è¾“å…¥å¡«å…… ...
// ... å¤„ç† ...

// æ–¹æ¡ˆ 2: åˆ†åˆ«ç›‘æ§è¾“å…¥å¡«å……å’Œå¤„ç†æ—¶é—´
let input_fill_start = Instant::now();
// ... è¾“å…¥å¡«å…… ...
let input_fill_time = input_fill_start.elapsed();
let frame_start = Instant::now();
// ... å¤„ç† ...
let process_time = frame_start.elapsed();
let total_time = input_fill_time + process_time;
```

---

## 3. æ–°å‘ç°çš„ä¸­ç­‰é—®é¢˜ âš ï¸

### 3.1 AUDIO-BUG-V4-003: é¢‘è°±æ¨é€ä»æ¯æ¬¡åˆ†é…å†…å­˜

**ä½ç½®**: `capture.rs:2324`

**é—®é¢˜åˆ†æ**:
```2324:2324:demo/src/capture.rs
    let out = spec.iter().map(|x| x.norm_sqr().max(1e-10).log10() * 10.).collect::<Vec<f32>>();
```

**é—®é¢˜**:
- è™½ç„¶æ¨é€é¢‘ç‡é™ä½äº†ï¼ˆæ¯ 3 å¸§ä¸€æ¬¡ï¼‰ï¼Œä½†æ¯æ¬¡æ¨é€ä»åˆ†é…æ–°å†…å­˜
- `collect::<Vec<f32>>()` æ¯æ¬¡åˆ†é…æ–°å‘é‡ï¼ˆé€šå¸¸ 480+ ä¸ªå…ƒç´ ï¼‰
- ç„¶åè½¬æ¢ä¸º `Box<[f32]>`ï¼Œåˆåˆ†é…ä¸€æ¬¡

**å½±å“**:
- ä»æœ‰å†…å­˜åˆ†é…å¼€é”€ï¼ˆè™½ç„¶é¢‘ç‡é™ä½äº†ï¼‰
- å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡
- å¯èƒ½è§¦å‘ GCï¼ˆå¦‚æœç³»ç»Ÿæœ‰ï¼‰

**å»ºè®®ä¿®å¤**:
```rust
// é‡ç”¨ç¼“å†²åŒº
static mut SPEC_BUF: Option<Vec<f32>> = None;
unsafe {
    if SPEC_BUF.is_none() || SPEC_BUF.as_ref().unwrap().len() < spec.len() {
        SPEC_BUF = Some(Vec::with_capacity(spec.len()));
    }
    let buf = SPEC_BUF.as_mut().unwrap();
    buf.clear();
    buf.extend(spec.iter().map(|x| x.norm_sqr().max(1e-10).log10() * 10.));
    if let Err(err) = sender.send(buf.as_slice().into()) {
        log::warn!("Failed to send spectrogram data: {}", err);
    }
}
```

---

### 3.2 AUDIO-BUG-V4-004: ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—ä»æ¯å¸§æ‰§è¡Œ

**ä½ç½®**: `capture.rs:1150`

**é—®é¢˜åˆ†æ**:
```1150:1150:demo/src/capture.rs
                let feats = compute_noise_features(df.get_spec_noisy());
```

**é—®é¢˜**:
- ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—ï¼ˆåŒ…æ‹¬é¢‘è°±ç‰¹å¾è®¡ç®—ï¼‰æ¯å¸§éƒ½æ‰§è¡Œ
- `compute_noise_features` åŒ…å«å¤§é‡å¯¹æ•°è¿ç®—ï¼ˆ`ln()`, `log10()`, `exp()`ï¼‰ï¼Œè®¡ç®—é‡å¤§
- å¯ä»¥é™ä½è®¡ç®—é¢‘ç‡ï¼ˆå¦‚æ¯ 2-3 å¸§ä¸€æ¬¡ï¼‰ï¼Œå› ä¸ºç¯å¢ƒç‰¹å¾å˜åŒ–è¾ƒæ…¢

**å½±å“**:
- ä»æœ‰ 5-15ms çš„è®¡ç®—å¼€é”€
- å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–

**å»ºè®®ä¿®å¤**:
```rust
// æ¯ 2 å¸§è®¡ç®—ä¸€æ¬¡ç‰¹å¾
static mut FEATURE_COUNTER: usize = 0;
unsafe {
    FEATURE_COUNTER += 1;
    let feats = if FEATURE_COUNTER % 2 == 0 {
        compute_noise_features(df.get_spec_noisy())
    } else {
        // ä½¿ç”¨ç¼“å­˜çš„ feats
        cached_feats
    };
    // ... ä½¿ç”¨ feats
}
```

---

### 3.3 AUDIO-BUG-V4-005: VAD é‡é‡‡æ ·è¾“å‡ºå¯èƒ½ä¸å®Œæ•´

**ä½ç½®**: `capture.rs:1206-1211`

**é—®é¢˜åˆ†æ**:
```1206:1211:demo/src/capture.rs
                                    if let Ok(out) = rs.process(rs_buf, None) {
                                        if let Some(out_ch) = out.get(0) {
                                            for &v in out_ch.iter() {
                                                push_sample(v);
                                            }
                                        }
                                    }
```

**é—®é¢˜**:
1. **é‡é‡‡æ ·è¾“å‡ºå¯èƒ½ä¸ºç©º**: `rs.process()` å¯èƒ½è¿”å›ç©ºè¾“å‡ºï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸€å¸§ï¼‰
2. **æ²¡æœ‰æ£€æŸ¥è¾“å‡ºé•¿åº¦**: æ²¡æœ‰æ£€æŸ¥ `out_ch` çš„é•¿åº¦
3. **å¯èƒ½å¯¼è‡´ VAD ç¼“å†²åŒºä¸è¿ç»­**: å¦‚æœæŸäº›å¸§æ²¡æœ‰è¾“å‡ºï¼ŒVAD ç¼“å†²åŒºå¯èƒ½ä¸è¿ç»­

**å½±å“**:
- VAD è¾“å…¥å¯èƒ½ä¸è¿ç»­
- å¯èƒ½å½±å“ VAD å‡†ç¡®æ€§

**å»ºè®®**:
- æ£€æŸ¥é‡é‡‡æ ·è¾“å‡ºæ˜¯å¦ä¸ºç©º
- è®°å½•é‡é‡‡æ ·è¾“å‡ºé•¿åº¦
- å¦‚æœè¾“å‡ºä¸ºç©ºï¼Œè·³è¿‡è¯¥å¸§

---

## 4. é€»è¾‘å’Œè®¾è®¡é—®é¢˜

### 4.1 AUDIO-LOGIC-V4-001: VAD ç¼“å†²åŒºå¡«å……é€»è¾‘å¯èƒ½ä¸ä¸€è‡´

**ä½ç½®**: `capture.rs:1175-1226`

**é—®é¢˜åˆ†æ**:
- VAD ç¼“å†²åŒºå¡«å……åœ¨ç¯å¢ƒè‡ªé€‚åº”ä»£ç å—å†…ï¼ˆ`if env_auto_enabled`ï¼‰
- ä½† VAD å¤„ç†ä¹Ÿåœ¨åŒä¸€ä»£ç å—å†…
- å¦‚æœ `env_auto_enabled` ä¸º falseï¼ŒVAD å®Œå…¨ä¸ä¼šå·¥ä½œ

**é—®é¢˜**:
- VAD åº”è¯¥ç‹¬ç«‹äºç¯å¢ƒè‡ªé€‚åº”
- å³ä½¿ç¯å¢ƒè‡ªé€‚åº”å…³é—­ï¼ŒVAD ä¹Ÿåº”è¯¥å·¥ä½œï¼ˆå¦‚æœå¯ç”¨ï¼‰

**å»ºè®®**:
- å°† VAD ç¼“å†²åŒºå¡«å……å’Œå¤„ç†ç§»åˆ°ç¯å¢ƒè‡ªé€‚åº”ä»£ç å—å¤–
- æˆ–æ·»åŠ ç‹¬ç«‹çš„ VAD å¯ç”¨æ£€æŸ¥

---

### 4.2 AUDIO-LOGIC-V4-002: ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—ä¾èµ– VAD ç»“æœ

**ä½ç½®**: `capture.rs:1150-1297`

**é—®é¢˜åˆ†æ**:
- ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—åœ¨ VAD å¤„ç†ä¹‹å‰ï¼ˆ`1150` è¡Œè®¡ç®—ç‰¹å¾ï¼Œ`1228` è¡Œå¤„ç† VADï¼‰
- ä½†ç¯å¢ƒè‡ªé€‚åº”é€»è¾‘ä¾èµ– `is_voice`ï¼ˆVAD ç»“æœï¼‰
- è¿™å¯¼è‡´ç¬¬ä¸€å¸§ç¯å¢ƒè‡ªé€‚åº”å¯èƒ½ä½¿ç”¨é”™è¯¯çš„ VAD çŠ¶æ€

**é—®é¢˜**:
- é€»è¾‘é¡ºåºå¯èƒ½ä¸åˆç†
- ç¬¬ä¸€å¸§å¯èƒ½ä½¿ç”¨æœªåˆå§‹åŒ–çš„ VAD çŠ¶æ€

**å»ºè®®**:
- ç¡®ä¿ VAD å¤„ç†åœ¨ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—ä¹‹å‰
- æˆ–ä½¿ç”¨ä¸Šä¸€å¸§çš„ VAD çŠ¶æ€

---

## 5. æ€§èƒ½é—®é¢˜

### 5.1 AUDIO-PERF-V4-001: push_spec ä»æ¯æ¬¡åˆ†é…å†…å­˜

**ä½ç½®**: `capture.rs:2324`

**é—®é¢˜**: è§ 3.1

---

### 5.2 AUDIO-PERF-V4-002: compute_noise_features è®¡ç®—é¢‘ç‡è¿‡é«˜

**ä½ç½®**: `capture.rs:1150`

**é—®é¢˜**: è§ 3.2

---

### 5.3 AUDIO-PERF-V4-003: å¤šæ¬¡è°ƒç”¨ df.get_spec_noisy()

**ä½ç½®**: `capture.rs:1150, 1888`

**é—®é¢˜åˆ†æ**:
- `df.get_spec_noisy()` åœ¨å¤šä¸ªåœ°æ–¹è¢«è°ƒç”¨
- æ¯æ¬¡è°ƒç”¨å¯èƒ½æ¶‰åŠå†…å­˜è®¿é—®å’Œè½¬æ¢
- å¯ä»¥ç¼“å­˜ç»“æœï¼Œé¿å…é‡å¤è°ƒç”¨

**å»ºè®®**:
- ç¼“å­˜ `get_spec_noisy()` çš„ç»“æœ
- åœ¨åŒä¸€å¸§å†…é‡ç”¨

---

## 6. ä»£ç è´¨é‡é—®é¢˜

### 6.1 AUDIO-CODE-V4-001: ä½¿ç”¨ unsafe é™æ€å˜é‡

**ä½ç½®**: `capture.rs:1884, 995`

**é—®é¢˜åˆ†æ**:
```1884:1884:demo/src/capture.rs
            spec_push_counter = spec_push_counter.wrapping_add(1);
```

```995:995:demo/src/capture.rs
        let mut spec_push_counter: usize = 0;
```

**é—®é¢˜**:
- `spec_push_counter` æ˜¯å±€éƒ¨å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯éƒ½é‡ç½®ä¸º 0
- è¿™æ„å‘³ç€èŠ‚æµæœºåˆ¶å¯èƒ½ä¸å·¥ä½œï¼ˆæ¯æ¬¡éƒ½æ˜¯ 0 % 3 == 0ï¼‰

**æ£€æŸ¥**: éœ€è¦ç¡®è®¤ `spec_push_counter` æ˜¯å¦åœ¨å¾ªç¯å¤–å®šä¹‰

**å½±å“**:
- å¦‚æœç¡®å®æ˜¯å±€éƒ¨å˜é‡ï¼ŒèŠ‚æµæœºåˆ¶å¤±æ•ˆ
- é¢‘è°±æ¨é€ä»ç„¶æ˜¯æ¯å¸§ä¸€æ¬¡

---

### 6.2 AUDIO-CODE-V4-002: ç¼ºå°‘é”™è¯¯æ¢å¤æœºåˆ¶

**é—®é¢˜**: 
- é‡é‡‡æ ·å¤±è´¥æ—¶ç›´æ¥è·³è¿‡å¸§
- VAD å¤„ç†å¤±è´¥æ—¶æ²¡æœ‰é‡è¯•
- æ²¡æœ‰é™çº§æ–¹æ¡ˆ

**å»ºè®®**:
- å®ç°é”™è¯¯é‡è¯•æœºåˆ¶
- æ·»åŠ é™çº§æ–¹æ¡ˆ

---

## 7. ä¼˜å…ˆçº§å»ºè®®

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³ä¿®å¤ï¼‰
1. **AUDIO-BUG-V4-001**: VAD æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ - ä¸¥é‡å½±å“ VAD å‡†ç¡®æ€§
2. **AUDIO-CODE-V4-001**: spec_push_counter ä½œç”¨åŸŸæ£€æŸ¥ - å¯èƒ½ä½¿èŠ‚æµå¤±æ•ˆ
3. **AUDIO-BUG-V4-002**: frame_start è®¡æ—¶ä½ç½® - å½±å“æ€§èƒ½ç›‘æ§

### ä¸­ä¼˜å…ˆçº§ï¼ˆè¿‘æœŸä¼˜åŒ–ï¼‰
1. **AUDIO-BUG-V4-003**: é¢‘è°±æ¨é€å†…å­˜åˆ†é…ä¼˜åŒ–
2. **AUDIO-BUG-V4-004**: ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—é¢‘ç‡ä¼˜åŒ–
3. **AUDIO-BUG-V4-005**: VAD é‡é‡‡æ ·è¾“å‡ºæ£€æŸ¥

### ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸæ”¹è¿›ï¼‰
1. **AUDIO-LOGIC-V4-001/002**: é€»è¾‘é¡ºåºä¼˜åŒ–
2. **AUDIO-PERF-V4-003**: ç¼“å­˜ get_spec_noisy ç»“æœ

---

## 8. æ€»ç»“

### âœ… å·²ä¿®å¤çš„é—®é¢˜
1. VAD while å¾ªç¯ - å·²ä¿®å¤
2. é¢‘è°±æ¨é€é¢‘ç‡ - å·²ä¼˜åŒ–
3. VAD ç¼“å†²åŒºé‡ç”¨ - å·²å®ç°

### ğŸ”´ æ–°å‘ç°çš„ä¸¥é‡é—®é¢˜
1. **VAD æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ç¼ºå¤±** - å¯èƒ½å¯¼è‡´ VAD å®Œå…¨å¤±æ•ˆ
2. **spec_push_counter ä½œç”¨åŸŸé—®é¢˜** - å¯èƒ½ä½¿èŠ‚æµæœºåˆ¶å¤±æ•ˆ
3. **frame_start è®¡æ—¶ä½ç½®ä¸å‡†ç¡®** - å½±å“æ€§èƒ½ç›‘æ§

### âš ï¸ éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–
1. é¢‘è°±æ¨é€å†…å­˜åˆ†é…
2. ç¯å¢ƒè‡ªé€‚åº”è®¡ç®—é¢‘ç‡
3. VAD é‡é‡‡æ ·è¾“å‡ºæ£€æŸ¥

### ğŸ“Š æ€§èƒ½æ”¹å–„é¢„æœŸ
- å¦‚æœæ‰€æœ‰ä¿®å¤ç”Ÿæ•ˆï¼šæ€»è€—æ—¶ä» 47-94ms é™ä½åˆ° 25-50ms
- ä½†ä»éœ€ä¿®å¤ VAD æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼Œå¦åˆ™ VAD å¯èƒ½å¤±æ•ˆ

### ğŸ¯ å»ºè®®
**ç«‹å³ä¿®å¤ VAD æ•°æ®å®Œæ•´æ€§æ£€æŸ¥é—®é¢˜**ï¼Œè¿™æ˜¯æœ€ä¸¥é‡çš„é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´ VAD å®Œå…¨å¤±æ•ˆã€‚

